<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Just Sing</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Lexend+Giga:wght@700&family=Alpha+Slab+One&display=swap" rel="stylesheet">
  <!-- Mercado Pago SDK -->
  <script src="https://sdk.mercadopago.com/js/v2"></script>

  <style>
    /* ----------  VARIABLES  ---------- */
    :root{
      --color-bg:#fdfcfc;
      --color-primary:#6b0014;
      --color-primary-dark:#36000b;
      --color-light:#ffffff;
      --shadow:0 4px 12px rgba(0,0,0,.1);
    }

    /* ----------  RESET / BASE  ---------- */
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Poppins',sans-serif;background:var(--color-bg);color:var(--color-primary-dark);}
    img{max-width:100%;display:block;border-radius:10px}
    h2{text-align:center;font-size:2rem;color:var(--color-primary);margin:2rem 0 .5rem}
    button{cursor:pointer;transition:all .25s ease}

    /* ----------  HEADER  ---------- */
    .store-header{
      background:var(--color-primary-dark);
      color:var(--color-light);
      height:64px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:sticky;top:0;z-index:100;box-shadow:0 2px 4px rgba(0,0,0,.3);
    }
    .store-title{font-family:'Lexend Giga',sans-serif;font-size:1.9rem;letter-spacing:1px;font-weight:700;}
    .cart-button{
      position:absolute;right:24px;
      background:none;border:none;color:var(--color-light);
      font-size:1.6rem;line-height:1;
    }
    .cart-button:hover{transform:scale(1.15)}

    /* ----------  GRID DE PRODUCTOS  ---------- */
    #productos{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:30px;
      max-width:1200px;
      padding:40px 5%;
      margin:0 auto;
    }
    .producto{
      background:var(--color-light);
      border-radius:15px;box-shadow:var(--shadow);
      padding:20px;text-align:center;
      transition:transform .2s ease;
    }
    .producto h3{margin:10px 0 4px;font-size:1.15rem;font-family:'Climate Crisis',sans-serif}
    .producto p{margin-bottom:12px;font-size:.95rem}
    .producto:hover{transform:translateY(-4px)}
    .producto button{
      background:var(--color-primary);
      color:var(--color-light);
      border:2px solid var(--color-light);
      border-radius:20px;padding:8px 16px;font-weight:500;
    }
    .producto button:hover{
      background:var(--color-light);
      color:var(--color-primary);
      border:2px solid var(--color-primary);
    }

    /* ----------  CARRITO LATERAL  ---------- */
    #carrito{
      position:fixed;top:0;right:-350px;width:320px;height:100vh;
      background:var(--color-light);
      box-shadow:-2px 0 8px rgba(0,0,0,.2);
      transition:right .3s ease;padding:24px 16px;overflow-y:auto;z-index:150;
    }
    #carrito.open{right:0}
    #carrito h2{margin-bottom:1rem}
    #lista-carrito li{display:flex;justify-content:space-between;margin-bottom:.5rem}
    #lista-carrito button{background:none;border:none;color:var(--color-primary);font-size:1rem}

    /* ----------  BOTÓN GENÉRICO  ---------- */
    .btn{padding:8px 12px;margin:5px;background:#000;color:#fff;border:none;border-radius:6px}

    /* ----------  NOTIFICACIÓN  ---------- */
    .notificacion{
      position:fixed;bottom:20px;right:20px;
      background:var(--color-primary);color:#fff;padding:10px 20px;border-radius:12px;
      box-shadow:0 4px 10px rgba(0,0,0,.2);display:none;
      animation:fadeIn .3s ease forwards;
    }
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

    /* ----------  RESPONSIVE  ---------- */
    @media(max-width:900px){
      #productos{grid-template-columns:repeat(2,1fr)}
    }
    @media(max-width:600px){
      #productos{grid-template-columns:1fr}
      .store-title{font-size:1.4rem}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="store-header">
    <div class="store-title">JustSing</div>
    <button class="cart-button" onclick="toggleCart()">🛒</button>
  </header>

  <!-- Productos -->
  <h2>Productos</h2>
  <div id="productos">
    <div class="producto"><img src="https://i.postimg.cc/66cjFV71/IMG-9268.jpg" alt="Bolsa Florero"><h3>Bolsa Florero</h3><p>$25.000</p><button class="btn-agregar" data-id="1" data-nombre="Bolsa Florero" data-precio="25000">Agregar al carrito</button>
    <div class="producto"><img src="https://i.imgur.com/cU50TcN.jpeg" alt="Bolsa Mujer"><h3>Bolsa Mujer</h3><p>$13.500</p><button class="btn-agregar" data-id="2" data-nombre="Bolsa Mujer" data-precio="13500">Agregar al carrito</button>
    <div class="producto"><img src="tu-imagen.jpg" alt="Bolsa Lluvia"><h3>Bolsa Lluvia</h3><p>$14.500</p><button class="btn-agregar" data-id="3" data-nombre="Bolsa Lluvia" data-precio="14500">Agregar al carrito</button>
    <div class="producto"><img src="https://i.imgur.com/XVIESt1.jpeg" alt="Bolsa Lavanda"><h3>Bolsa Lavanda</h3><p>$16.500</p><button class="btn-agregar" data-id="4" data-nombre="Bolsa Lavanda" data-precio="16500">Agregar al carrito</button>
    <div class="producto"><img src="tu-imagen.jpg" alt="Bolsa Patö"><h3>Bolsa Patö</h3><p>$11.500</p><button class="btn-agregar" data-id="5" data-nombre="Bolsa Patö" data-precio="11500">Agregar al carrito</button>
    <div class="producto"><img src="https://i.imgur.com/SQjkk2Y.jpeg" alt="Bolsa Mida"><h3>Bolsa Mida</h3><p>$20.000</p><button class="btn-agregar" data-id="6" data-nombre="Bolsa Mida" data-precio="20000">Agregar al carrito</button>
    <div class="producto"><img src="tu-imagen.jpg" alt="Bolsa Olivo"><h3>Bolsa Olivo</h3><p>$13.000</p><button class="btn-agregar" data-id="7" data-nombre="Bolsa Olivo" data-precio="13000">Agregar al carrito</button>
    <div class="producto"><img src="https://i.imgur.com/bqt47CU.jpeg" alt="Bolsa 13"><h3>Bolsa 13</h3><p>$13.000</p><button class="btn-agregar" data-id="8" data-nombre="Bolsa 13" data-precio="13000">Agregar al carrito</button>
    <div class="producto"><img src="tu-imagen.jpg" alt="Bolsa Frutis"><h3>Bolsa Frutis</h3><p>$15.000</p><button class="btn-agregar" data-id="9" data-nombre="Bolsa Frutis" data-precio="15000">Agregar al carrito</button>
  </div>

  <!-- Carrito lateral -->
  <aside id="carrito">
    <h2>Carrito</h2>
    <ul id="lista-carrito"></ul>
    <p>Total: $<span id="total">0</span></p>
    <button class="btn" onclick="vaciarCarrito()">Vaciar carrito</button>
    <button class="btn" onclick="mostrarEnvio()">Continuar compra</button>
  </aside>

  <!-- Sección de envío -->
  <section id="seccion-envio" style="display:none;padding:20px;max-width:600px;margin:0 auto;">
    <h2>Envío</h2>
    <label><input type="radio" name="envio" value="domicilio" checked onchange="mostrarFormulario('domicilio')"> Correo Argentino (domicilio)</label><br>
    <label><input type="radio" name="envio" value="sucursal" onchange="mostrarFormulario('sucursal')"> Correo Argentino (sucursal)</label>
    <div id="form-domicilio" style="margin-top:1rem;">
      <input placeholder="Provincia" required><br>
      <input placeholder="Localidad" required><br>
      <input placeholder="Calle y Número" required><br>
      <input placeholder="Código postal" required><br>
      <input placeholder="Piso y Dpto (opcional)"><br>
      <input id="correo" placeholder="Correo electrónico" required><span id="error-correo" class="error"></span><br>
      <input placeholder="Nombre y apellido" required><br>
      <input placeholder="Teléfono" required>
    </div>
    <div id="form-sucursal" style="display:none;margin-top:1rem;">
      <input placeholder="Provincia" required><br>
      <input placeholder="Localidad" required><br>
      <input placeholder="Calle y Número de Sucursal" required><br>
      <input placeholder="Nombre y apellido" required><br>
      <input placeholder="Correo electrónico" required><br>
      <input placeholder="Teléfono" required>
    </div>
    <button class="btn" onclick="volverAlCarrito()">Volver al carrito</button>
    <button class="btn" onclick="mostrarResumenPedido()">Continuar compra</button>
  </section>

  <!-- Resumen -->
  <section id="resumen-pedido" style="display:none;padding:20px;max-width:600px;margin:0 auto;">
    <h2>Resumen del pedido</h2>
    <ul id="lista-resumen"></ul>
    <p>Envío: $<span id="costo-envio"></span></p>
    <p><strong>Total: $<span id="total-final"></span></strong></p>
    <button class="btn" onclick="mostrarPago()">Finalizar compra</button>
  </section>

  <!-- Pago -->
  <section id="seccion-pago" style="display:none;padding:20px;max-width:600px;margin:0 auto;">
    <h2>Pago</h2>
    <label><input type="radio" name="pago" value="mp" checked> Mercado Pago</label>
    <p style="margin-left:20px 0;">Pagá de forma segura con Mercado Pago.</p>
    <label><input type="radio" name="pago" value="transfer"> Transferencia bancaria</label>
    <p style="margin-left:20px;">CVU: 0000003100093480929286<br>Alias: JustSing<br>Titular: Just Sing</p>
    <button class="btn" onclick="pagarConMercadoPago()">Pagar con Mercado Pago</button>
    <button class="btn" id="finalizar-compra">Finalizar compra</button>
  </section>

  <!-- Confirmación -->
  <section id="confirmacion-compra" style="display:none;padding:20px;text-align:center;">
    <h2>¡Gracias por tu compra!</h2>
    <p>Te contactaremos al correo proporcionado para confirmar el envío.</p>
  </section>

  <!-- Notificación -->
  <div id="notificacion" class="notificacion"></div>

  <!-- SCRIPT PRINCIPAL -->
  <script>
    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
    let costoEnvio = 5000;
    const mp = new MercadoPago('TEST-bf643f67-1adb-4977-a2c2-d6626c5d9d6a',{locale:'es-AR'});

    /* ---------- UTILIDADES ---------- */
    const qs = s=>document.querySelector(s);
    const q      = s=>document.querySelector(s);

    function guardarCarrito(){localStorage.setItem('carrito',JSON.stringify(carrito));}
    function notificar(text){const n=qs('#notificacion');n.textContent=text;n.style.display='block';setTimeout(()=>n.style.display='none',3000);}

    /* ---------- CARRITO ---------- */
    function toggleCart(){qs('#carrito').classList.toggle('open');}

    function actualizarCarrito(){
      const ul=qs('#lista-carrito');ul.innerHTML='';let total=0;
      carrito.forEach(p=>{
        const li=document.createElement('li');
        li.textContent=`${p.nombre} - $${p.precio.toLocaleString('es-AR')}`;
        const b=document.createElement('button');b.textContent='❌';b.onclick=()=>eliminarDelCarrito(p.id);
        li.appendChild(b);ul.appendChild(li);total+=p
function agregarAlCarrito(producto) {
  const existente = carrito.find(p => p.id === producto.id);
  if (existente) {
    existente.cantidad += 1;
  } else {
    producto.cantidad = 1;
    carrito.push(producto);
  }
  guardarCarrito();
  actualizarCarrito();
  notificar(`${producto.nombre} agregado al carrito`);
}

  // ... tu código existente

  const botonesAgregar = document.querySelectorAll('.btn-agregar');

  botonesAgregar.forEach(boton => {
    boton.addEventListener('click', () => {
      const productoId = boton.getAttribute('data-id');
      const productoNombre = boton.getAttribute('data-nombre');
      const productoPrecio = parseFloat(boton.getAttribute('data-precio'));

      agregarAlCarrito({
        id: productoId,
        nombre: productoNombre,
        precio: productoPrecio,
        cantidad: 1
      });
    });
  });
</script>
</body>
</html>
